from project.production import *

ALLOWED_HOSTS = ['127.0.0.1', 'localhost']
DEBUG=False

SECRET_KEY = '{{ vault_secret_key }}'

DATABASES = {
  'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'NAME': '{{ vault_postgresql_database }}',
    'USER': '{{ vault_postgresql_user }}',
    'PASSWORD': '{{ vault_postgresql_password }}',
    'HOST': 'localhost',
    'PORT': '5432',
  }
}

CELERY_BROKER_URL = 'amqp://{{ rabbitmq_user }}:{{ rabbitmq_password }}@localhost:5672/{{ rabbitmq_vhost }}'

SENTRY_DSN = '{{ sentry_dsn }}'
SENTRY_SITE = '{{ bew_fqdn }}'

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'loggers': {
      '': {
        'level': 'DEBUG',
        'handlers': ['console'],
        'filters': ['default'],
      },
    },
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s %(data)s'
        },
    },
    'filters': {
      'default': {
        '()': 'project.logging_helpers.Filter',
      },
    },
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'formatter': 'verbose',
            'filters': ['default'],
        }
    },
}
